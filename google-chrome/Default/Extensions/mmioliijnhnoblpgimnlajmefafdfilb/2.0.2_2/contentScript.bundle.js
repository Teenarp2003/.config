chrome.storage.sync.get(["amconnect"],(e=>{e||window.localStorage.removeItem("amconnect")})),chrome.runtime.onMessage.addListener(((e,t,n)=>{let{eventType:o,key:c,data:a}=e;if("storage"===o&&"amconnect"===c&&!a){window.localStorage.removeItem("amconnect");let e=new CustomEvent("contentscript:storageChange",{detail:{eventType:"removed",key:c}});document.dispatchEvent(e)}return n({success:!0}),!0})),document.addEventListener("contentscript_host:storageChange",(e=>{let{eventType:t,key:n,data:o}=e.detail;"amconnect"===n&&("removed"===t?chrome.storage.sync.remove(n):chrome.storage.sync.set(o,(()=>{})))}));